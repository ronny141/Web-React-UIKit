{"version":3,"file":"index.js","sources":["../node_modules/babel-plugin-transform-async-to-promises/helpers.mjs","../src/RtcContext.tsx","../src/PropsContext.tsx","../src/MaxUidContext.tsx","../src/MinUidContext.tsx","../src/TracksContext.tsx","../src/Reducer.tsx","../src/RTCConfigure.tsx","../src/Controls/Icons.tsx","../src/Controls/IconsColors.tsx","../src/Controls/BtnTemplate.tsx","../src/LocalUserContext.tsx","../src/Controls/Local/muteAudio.ts","../src/Controls/Local/LocalAudioMute.tsx","../src/Controls/Local/muteVideo.ts","../src/Controls/Local/LocalVideoMute.tsx","../src/Controls/LocalControls.tsx","../src/RtmContext.tsx","../src/Controls/Remote/RemoteVideoMute.tsx","../src/Controls/Remote/RemoteAudioMute.tsx","../src/Controls/SwapUser.tsx","../src/VideoPlaceholder.tsx","../src/Username.tsx","../src/MaxVideoView.tsx","../src/MinVideoView.tsx","../src/PinnedVideo.tsx","../src/GridVideo.tsx","../src/TracksConfigure.tsx","../src/RTMConfigure.tsx","../src/Controls/Remote/RemoteMutePopUp.tsx","../src/AgoraUIKit.tsx","../src/Controls/Local/EndCall.tsx"],"sourcesContent":["// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","import React from 'react'\nimport {\n  IAgoraRTCClient,\n  ILocalAudioTrack,\n  ILocalVideoTrack,\n  UID\n} from 'agora-rtc-react'\nimport { CallbacksInterface, mediaStore } from './PropsContext'\n\nexport type DispatchType = <\n  T extends keyof CallbacksInterface,\n  V extends Parameters<CallbacksInterface[T]>\n>(action: {\n  type: T\n  value: V\n}) => void\n\n/**\n * Interface for the RtcContext\n */\nexport interface RtcContextInterface {\n  /**\n   * The client object used by the web SDK\n   */\n  client: IAgoraRTCClient\n  /**\n   * The local user's video track\n   */\n  localVideoTrack: ILocalVideoTrack | null\n  /**\n   * The local user's audio track\n   */\n  localAudioTrack: ILocalAudioTrack | null\n  /**\n   * An object containing a key value store of tracks mapped to users UIDs\n   */\n  mediaStore: mediaStore\n  /**\n   * React dispatch to update values in the reducer\n   */\n  dispatch: DispatchType\n  /**\n   * The local UID returned by the SDK when using local uid as 0.\n   */\n  localUid: React.MutableRefObject<UID | undefined>\n  /**\n   * Is the UIKit in a channel\n   */\n  channelJoined: boolean\n}\n/**\n * Context to access local/remote tracks, client, dispatch and localuid. It's setup by {@link RtcConfigure}.\n */\nconst RtcContext = React.createContext<RtcContextInterface>(\n  {} as RtcContextInterface\n)\n\nexport interface ActionInterface<T extends keyof CallbacksInterface> {\n  type: T\n  value: Parameters<CallbacksInterface[T]>\n}\nexport type ActionType<T extends keyof CallbacksInterface> = ActionInterface<T>\n\nexport const RtcProvider = RtcContext.Provider\nexport const RtcConsumer = RtcContext.Consumer\nexport default RtcContext\n","import {\n  IAgoraRTCClient,\n  VideoPlayerConfig,\n  IRemoteAudioTrack,\n  IRemoteVideoTrack,\n  ILocalVideoTrack,\n  ILocalAudioTrack,\n  UID,\n  RemoteStreamFallbackType,\n  ConnectionState,\n  ConnectionDisconnectedReason,\n  IAgoraRTCRemoteUser,\n  RemoteStreamType,\n  ChannelMediaRelayState,\n  ChannelMediaRelayError,\n  ChannelMediaRelayEvent,\n  NetworkQuality,\n  AgoraRTCError,\n  IMicrophoneAudioTrack,\n  ICameraVideoTrack\n} from 'agora-rtc-react'\n// import {RtmChannelEvents} from 'agora-rtm-react'\nimport React from 'react'\nimport { rtmCallbacks } from './RtmContext'\n\ninterface media {\n  videoTrack?: IRemoteVideoTrack\n  audioTrack?: IRemoteAudioTrack\n}\ninterface localMedia {\n  videoTrack?: ILocalVideoTrack\n  audioTrack?: ILocalAudioTrack\n}\n\nexport type mediaStore = {\n  [key in UID]: media | localMedia\n}\n\nexport enum remoteTrackState {\n  yes = 0, // remote published\n  subbed = 1, // remote published and subscribed\n  no = 2 // remote unpublished\n}\n\n/**\n * Data type for a UIKitUser\n */\nexport type UIKitUser = RemoteUIKitUser | LocalUIKitUser\nexport interface LocalUIKitUser {\n  /**\n   * The ID of the remote user.\n   */\n  uid: 0\n  /**\n   * Whether the remote user is sending an audio track.\n   * - `true`: The remote user is sending an audio track.\n   * - `false`: The remote user is not sending an audio track.\n   */\n  hasAudio: ToggleState\n  /**\n   * Whether the remote user is sending a video track.\n   * - `true`: The remote user is sending an audio track.\n   * - `false`: The remote user is not sending an audio track.\n   */\n  hasVideo: ToggleState\n}\nexport interface RemoteUIKitUser {\n  /**\n   * The ID of the remote user.\n   */\n  uid: UID\n  /**\n   * Whether the remote user is sending an audio track.\n   * - `true`: The remote user is sending an audio track.\n   * - `false`: The remote user is not sending an audio track.\n   */\n  hasAudio: remoteTrackState\n  /**\n   * Whether the remote user is sending a video track.\n   * - `true`: The remote user is sending an audio track.\n   * - `false`: The remote user is not sending an audio track.\n   */\n  hasVideo: remoteTrackState\n}\n\n/**\n * Remote Buttons styles\n */\ninterface remoteBtnStylesInterface {\n  /**\n   * Style for the remote mute audio button\n   */\n  muteRemoteAudio?: React.CSSProperties\n  /**\n   * Style for the remote mute video button\n   */\n  muteRemoteVideo?: React.CSSProperties\n  /**\n   * Style for the remote swap button in pinned layout\n   */\n  remoteSwap?: React.CSSProperties\n  /**\n   * Style for the overlay close button\n   */\n  minCloseBtnStyles?: React.CSSProperties\n}\n\n/**\n * Local Buttons styles\n */\ninterface localBtnStylesInterface {\n  /**\n   * Style for the local mute audio button\n   */\n  muteLocalAudio?: React.CSSProperties\n  /**\n   * Style for the local mute video button\n   */\n  muteLocalVideo?: React.CSSProperties\n  /**\n   * Style for the switch camera button\n   */\n  switchCamera?: React.CSSProperties\n  /**\n   * Style for the end call button\n   */\n  endCall?: React.CSSProperties\n}\n\n/**\n * Props object for customising the UI Kit, takes in react native styling\n */\nexport interface StylePropInterface {\n  /**\n   * Sets the scaling of the video\n   */\n  videoMode?: {\n    max?: VideoPlayerConfig['fit']\n    min?: VideoPlayerConfig['fit']\n  }\n  /**\n   * Color tint for icons\n   */\n  theme?: string\n  /**\n   * Color tint for icons\n   */\n  iconSize?: number\n  /**\n   * Custom base64 string for icon\n   */\n  customIcon?: Partial<IconsInterface>\n  /**\n   * Globals style for the local buttons (except end call)\n   */\n  BtnTemplateStyles?: React.CSSProperties\n  /**\n   * Style for the big view in pinned layout\n   */\n  maxViewStyles?: React.CSSProperties\n  /**\n   * Style for the small view in pinned layout\n   */\n  minViewStyles?: React.CSSProperties\n  /**\n   * Style for the small view container\n   */\n  minViewContainer?: React.CSSProperties\n  /**\n   * Style for the big view container\n   */\n  maxViewContainer?: React.CSSProperties\n  /**\n   * Style for the overlay on small user view when pressed in pinned layout\n   */\n  minViewOverlayContainer?: React.CSSProperties\n  /**\n   * Style for the overlay on small user view when pressed in pinned layout\n   */\n  maxViewOverlayContainer?: React.CSSProperties\n  /**\n   * Style for the remote button\n   */\n  remoteBtnStyles?: remoteBtnStylesInterface\n  /**\n   * Style for the remote button container\n   */\n  remoteBtnContainer?: React.CSSProperties\n  /**\n   * Style for specific local buttons, overrides the style applied by BtnTemplateStyles prop\n   */\n  localBtnStyles?: localBtnStylesInterface\n  /**\n   * Style for the local button container\n   */\n  localBtnContainer?: React.CSSProperties\n  /**\n   * Applies style to the individual cell (view) containing the video in the grid layout\n   */\n  gridVideoCells?: React.CSSProperties\n  /**\n   * Applies style to the grid container\n   */\n  gridVideoContainer?: React.CSSProperties\n  /**\n   * Applies style to the grid container\n   */\n  pinnedVideoContainer?: React.CSSProperties\n  /**\n   * Applies style to the pinned scrollview container\n   */\n  scrollViewContainer?: React.CSSProperties\n  /**\n   * Applies style to the global view containing the UI Kit\n   */\n  UIKitContainer?: React.CSSProperties\n  /**\n   * Applies style to the pop up container for remote mute requests\n   */\n  popUpContainer?: React.CSSProperties\n  /**\n   * Applies style to the displayed username text container\n   */\n  usernameText?: React.CSSProperties\n}\n\n/**\n * Props for the VideoPlaceholder component\n */\nexport interface VideoPlaceholderProps {\n  user: UIKitUser\n  /**\n   * State value to display buttons\n   */\n  isShown: boolean\n  showButtons?: boolean\n  showSwap?: boolean\n}\n\n/**\n * Props object for customising the UI Kit functionality\n */\nexport interface RtcPropsInterface {\n  /**\n   * React functional component for overriding the default video placeholder\n   */\n  CustomVideoPlaceholder?: React.FunctionComponent<VideoPlaceholderProps>\n  /**\n   * Agora App ID - used to authenticate the request\n   */\n  appId: string\n  /**\n   * Channel name to join - users in the same channel can communicate with each other\n   */\n  channel: string\n  /**\n   * UID for local user to join the channel (default: 0)\n   */\n  uid?: number\n  /**\n   * Token used to join a channel when using secured mode (default: null)\n   */\n  token?: string | null\n  /**\n   * URL for token server, manages fetching and updating tokens automatically. Must follow the schema here - https://github.com/AgoraIO-Community/agora-token-service/\n   */\n  tokenUrl?: string\n  /**\n   * Set to true to enable active speaker callback, switches the pinned video to active speaker if you're using the pinned layout. (default: false)\n   */\n  activeSpeaker?: boolean\n  /**\n   * Once set to true, the UI Kit attempts to join the channel. Can be set to false to initialise the SDK and wait before joining the channel. (default: true)\n   */\n  callActive?: boolean\n  /**\n   * Pass in a custom RTC client, to use your own implementation of the AgoraRTCClient.\n   */\n  customRtcClient?: IAgoraRTCClient\n  /**\n   * Enables dual stream mode. (default: false)\n   */\n  enableDualStream?: boolean\n  /**\n   * Enable dual stream mode with selected fallback option. (default: disabled)\n   */\n  dualStreamMode?: RemoteStreamFallbackType\n  /**\n   * Choose between grid layout and pinned layout. (default: pinned layout)\n   */\n  layout?: layout\n  /**\n   * Set local user's role between audience and host. Use with mode set to livestreaming. (default: host)\n   */\n  role?: role\n  /**\n   * Enable the mic before joining the call. (default: true)\n   */\n  enableAudio?: boolean\n  /**\n   * Enable the camera before joining the call. Only use for initiak(default: true)\n   */\n  enableVideo?: boolean\n  /**\n   * Disable Agora RTM, this also disables the use of usernames and remote mute functionality\n   */\n  disableRtm?: boolean\n}\n\n/**\n * Props object for customising the UI Kit signalling functionality\n */\nexport interface RtmPropsInterface {\n  /**\n   * Username for the RTM Client, this value can be accessed using the userData object\n   */\n   username?: string\n   /**\n    * Token used to join an RTM channel when using secured mode (default: null)\n    */\n   token?: string | undefined\n   /**\n    * UID for local user to join the RTM channel (default: uses the RTC UID)\n    */\n   uid?: string\n   /**\n    * Show a pop up with option to accept mute request instead of directly muting the remote user (default: true), if set to false you cannot unmute users. \n    */\n   showPopUpBeforeRemoteMute?: boolean\n   /**\n    * Display RTM usernames in the Videocall (default: false)\n    */\n   displayUsername?: boolean\n}\n\n/**\n * Select a pre built layout\n */\nexport enum layout {\n  /**\n   * 0: Grid layout: each user occupies a cell in the grid\n   */\n  grid = 0,\n  /**\n   * 2: Pinned layout: MaxUser occupies the main view, the other users are in a floating view on top\n   */\n  pin = 1\n}\n\n/**\n * User role for live streaming mode\n */\ntype role = 'audience' | 'host'\n\n\nexport enum ToggleState {\n  disabled, // set as 0 - to evaluate falsy\n  enabled, // set as 1 - to evaluate truthy\n  disabling, // enabled -> disabling -> disabled\n  enabling // disabled -> enabling -> enabled\n}\n\n/**\n * Callbacks exposed by the UIKit\n */\nexport type CallbacksInterface = UIKitEventsInterface &\n  RtcEventsInterface\nexport interface UIKitEventsInterface {\n  EndCall(): void\n  ActiveSpeaker(uid: UID): void\n  ['update-user-video'](\n    tracks: [IMicrophoneAudioTrack, ICameraVideoTrack]\n  ): void\n  ['user-swap'](user: UIKitUser): void\n  ['local-user-mute-video'](status: ToggleState): void\n  ['local-user-mute-audio'](status: ToggleState): void\n  ['remote-user-mute-video'](user: UIKitUser, status: remoteTrackState): void\n  ['remote-user-mute-audio'](user: UIKitUser, status: remoteTrackState): void\n  ['leave-channel'](): void\n}\nexport interface RtcEventsInterface {\n  ['connection-state-change'](\n    curState: ConnectionState,\n    revState: ConnectionState,\n    reason?: ConnectionDisconnectedReason\n  ): void\n  ['user-joined'](user: IAgoraRTCRemoteUser): void\n  ['user-left'](user: IAgoraRTCRemoteUser, reason: string): void\n  ['user-published'](\n    user: IAgoraRTCRemoteUser,\n    mediaType: 'audio' | 'video'\n  ): void\n  ['user-unpublished'](\n    user: IAgoraRTCRemoteUser,\n    mediaType: 'audio' | 'video'\n  ): void\n  ['user-info-updated'](\n    uid: UID,\n    msg:\n      | 'mute-audio'\n      | 'mute-video'\n      | 'enable-local-video'\n      | 'unmute-audio'\n      | 'unmute-video'\n      | 'disable-local-video'\n  ): void\n  ['media-reconnect-start'](uid: UID, streamType: RemoteStreamType): void\n  ['media-reconnect-end'](uid: UID, streamType: RemoteStreamType): void\n  ['stream-type-changed'](uid: UID, streamType: RemoteStreamType): void\n  ['stream-fallback'](\n    uid: UID,\n    isFallbackOrRecover: 'fallback' | 'recover'\n  ): void\n  ['channel-media-relay-state'](\n    state: ChannelMediaRelayState,\n    code: ChannelMediaRelayError\n  ): void\n  ['channel-media-relay-event'](event: ChannelMediaRelayEvent): void\n  ['volume-indicator'](\n    result: {\n      level: number\n      uid: UID\n    }[]\n  ): void\n  ['crypt-error'](): void\n  ['token-privilege-will-expire'](): void\n  ['token-privilege-did-expire'](): void\n  ['network-quality'](stats: NetworkQuality): void\n  ['live-streaming-error'](url: string, err: AgoraRTCError): void\n  ['live-streaming-warning'](url: string, warning: AgoraRTCError): void\n  ['stream-inject-status'](\n    status: InjectStreamEventStatus,\n    uid: UID,\n    url: string\n  ): void\n  ['is-using-cloud-proxy'](isUsingProxy: boolean): void\n}\nexport interface PropsInterface {\n  /**\n   * Props used to customise the UIKit communication functionality\n   */\n  rtcProps: RtcPropsInterface\n  /**\n   * Props used to customise the UIKit signalling functionality\n   */\n  rtmProps?: RtmPropsInterface\n  /**\n   * Props used to customise the UI Kit's appearance (accepts style object for different components)\n   */\n  styleProps?: Partial<StylePropInterface>\n  /**\n   * Callbacks for different functions of the UI Kit\n   */\n  callbacks?: Partial<CallbacksInterface>\n  /**\n   * Callbacks for different functions of the UI Kit\n   */\n  rtmCallbacks?: rtmCallbacks\n}\n\n/**\n * Interface for icons supplied with the UIKit (curtosy of https://feathericons.com/)\n */\nexport interface IconsInterface {\n  /**\n   * Icon for Camera/Video mute in on state\n   */\n  videocam: string\n  /**\n   * Icon for Camera/Video mute in off state\n   */\n  videocamOff: string\n  /**\n   * Icon for Mic/Audio mute in on state\n   */\n  mic: string\n  /**\n   * Icon for Mic/Audio mute in off state\n   */\n  micOff: string\n  /**\n   * Icon to switch between device cameras\n   */\n  switchCamera: string\n  /**\n   * Icon to end the call\n   */\n  callEnd: string\n  /**\n   * Icon to swap the min user to max view\n   */\n  remoteSwap: string\n  /**\n   * Icon to close the overlay in floating layout\n   */\n  close: string\n}\n\nconst initialValue: PropsInterface = {\n  rtcProps: {\n    appId: '',\n    channel: '',\n    role: 'host'\n  },\n  rtmProps: {}\n}\n/**\n * React Context to manage the user props\n */\nconst PropsContext = React.createContext<PropsInterface>(initialValue)\n\nexport const PropsProvider = PropsContext.Provider\nexport const PropsConsumer = PropsContext.Consumer\n\nconst enum InjectStreamEventStatus {\n  /**\n   * Successfully injects the online media stream.\n   */\n  INJECT_STREAM_STATUS_START_SUCCESS = 0,\n  /**\n   * The online media stream already exists.\n   */\n  INJECT_STREAM_STATUS_START_ALREADY_EXISTS = 1,\n  /**\n   * Injecting the online media stream is not authorized.\n   */\n  INJECT_STREAM_STATUS_START_UNAUTHORIZED = 2,\n  /**\n   * Timeout when injecting the online media stream.\n   */\n  INJECT_STREAM_STATUS_START_TIMEOUT = 3,\n  /**\n   * Fails to inject the online media stream.\n   */\n  INJECT_STREAM_STATUS_START_FAILED = 4,\n  /**\n   * Succeessfully stops injecting the online media stream.\n   */\n  INJECT_STREAM_STATUS_STOP_SUCCESS = 5,\n  /**\n   * Fails to find the online media stream.\n   */\n  INJECT_STREAM_STATUS_STOP_NOT_FOUND = 6,\n  /**\n   * Stopping injecting the online media stream is not authorized.\n   */\n  INJECT_STREAM_STATUS_STOP_UNAUTHORIZED = 7,\n  /**\n   * Timeout when stopping the online media stream.\n   */\n  INJECT_STREAM_STATUS_STOP_TIMEOUT = 8,\n  INJECT_STREAM_STATUS_STOP_FAILED = 9,\n  /**\n   * The online media stream is corrupted.\n   */\n  INJECT_STREAM_STATUS_BROKEN = 10\n}\n\nexport default PropsContext\n","import React from 'react'\nimport { UIKitUser } from './PropsContext'\n\n/**\n * React context to expose user array displayed in the maximised view\n */\nconst MaxUidContext = React.createContext<UIKitUser[]>([])\n\nexport const MaxUidProvider = MaxUidContext.Provider\nexport const MaxUidConsumer = MaxUidContext.Consumer\nexport default MaxUidContext\n","import React from 'react'\nimport { UIKitUser } from './PropsContext'\n\n/**\n * React context to expose user array displayed in the minimized view\n */\nconst MinUidContext = React.createContext<UIKitUser[]>([])\n\nexport const MinUidProvider = MinUidContext.Provider\nexport const MinUidConsumer = MinUidContext.Consumer\nexport default MinUidContext\n","import React from 'react'\nimport { ILocalAudioTrack, ILocalVideoTrack } from 'agora-rtc-react'\n\nexport interface TracksContextInterface {\n  localVideoTrack: ILocalVideoTrack | null\n  localAudioTrack: ILocalAudioTrack | null\n}\n/**\n * React context that contains the local audio and video tracks. It's setup by {@link TracksConfigure}.\n */\nconst TracksContext = React.createContext<TracksContextInterface>(\n  {} as TracksContextInterface\n)\n\nexport const TracksProvider = TracksContext.Provider\nexport const TracksConsumer = TracksContext.Consumer\nexport default TracksContext\n","import { ActionType } from './RtcContext'\nimport {\n  UIKitUser,\n  remoteTrackState,\n  CallbacksInterface,\n  RemoteUIKitUser,\n  ToggleState\n} from './PropsContext'\nimport { UID } from 'agora-rtc-react'\nimport { actionTypeGuard } from './Utils/actionTypeGuard'\n\ntype stateType = { max: UIKitUser[]; min: UIKitUser[] }\n\nexport const initState = {\n  max: [\n    {\n      uid: 0,\n      hasAudio: remoteTrackState.no,\n      hasVideo: remoteTrackState.no\n    }\n  ] as UIKitUser[],\n  min: [] as UIKitUser[]\n}\n\nconst reducer = (\n  state: stateType,\n  action: ActionType<keyof CallbacksInterface>\n) => {\n  let stateUpdate: Partial<stateType> = initState\n  const uids: UID[] = [...state.max, ...state.min].map((u: UIKitUser) => u.uid)\n\n  switch (action.type) {\n    case 'update-user-video':\n      if (actionTypeGuard(action, action.type)) {\n        stateUpdate = {\n          min: state.min.map((user: UIKitUser) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: remoteTrackState.subbed,\n                hasVideo: remoteTrackState.subbed\n              }\n            } else {\n              return user\n            }\n          }),\n          max: state.max.map((user: UIKitUser) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: remoteTrackState.subbed,\n                hasVideo: remoteTrackState.subbed\n              }\n            } else {\n              return user\n            }\n          })\n        }\n      }\n      break\n    case 'user-joined':\n      if (actionTypeGuard(action, action.type)) {\n        if (uids.indexOf(action.value[0].uid) === -1) {\n          const minUpdate: stateType['min'] = [\n            ...state.min,\n            {\n              uid: action.value[0].uid,\n              hasAudio: remoteTrackState.no,\n              hasVideo: remoteTrackState.no\n            }\n          ]\n          if (minUpdate.length === 1 && state.max[0].uid === 0) {\n            stateUpdate = {\n              max: minUpdate,\n              min: state.max\n            }\n          } else {\n            stateUpdate = {\n              min: minUpdate,\n              max: state.max\n            }\n          }\n          // console.log('new user joined!\\n', action.value[0].uid)\n        }\n      }\n      break\n    case 'user-unpublished':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0].uid) {\n          stateUpdate = {\n            max: [\n              {\n                uid: action.value[0].uid,\n                hasAudio:\n                  action.value[1] === 'audio'\n                    ? remoteTrackState.no\n                    : (state.max[0].hasAudio as remoteTrackState),\n                hasVideo:\n                  action.value[1] === 'video'\n                    ? remoteTrackState.no\n                    : (state.max[0].hasVideo as remoteTrackState)\n              }\n            ],\n            min: state.min\n          }\n        } else {\n          const UIKitUser = state.min.find(\n            (user: UIKitUser) => user.uid === action.value[0].uid\n          )\n          if (UIKitUser) {\n            const minUpdate: stateType['min'] = [\n              ...state.min.filter(\n                (user: UIKitUser) => user.uid !== action.value[0].uid\n              ),\n              {\n                uid: action.value[0].uid,\n                hasAudio:\n                  action.value[1] === 'audio'\n                    ? remoteTrackState.no\n                    : (UIKitUser.hasAudio as remoteTrackState),\n                hasVideo:\n                  action.value[1] === 'video'\n                    ? remoteTrackState.no\n                    : (UIKitUser.hasVideo as remoteTrackState)\n              }\n            ]\n            stateUpdate = {\n              min: minUpdate,\n              max: state.max\n            }\n          }\n        }\n      }\n      break\n    case 'user-published':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0].uid) {\n          stateUpdate = {\n            max: [\n              {\n                uid: action.value[0].uid,\n                hasAudio:\n                  action.value[1] === 'audio'\n                    ? remoteTrackState.subbed\n                    : (state.max[0].hasAudio as remoteTrackState),\n                hasVideo:\n                  action.value[1] === 'video'\n                    ? remoteTrackState.subbed\n                    : (state.max[0].hasVideo as remoteTrackState)\n              }\n            ],\n            min: state.min\n          }\n        } else {\n          stateUpdate = {\n            min: state.min.map((user) => {\n              if (user.uid !== action.value[0].uid) {\n                return user\n              } else {\n                return {\n                  uid: user.uid,\n                  hasAudio:\n                    action.value[1] === 'audio'\n                      ? remoteTrackState.subbed\n                      : (user.hasAudio as remoteTrackState),\n                  hasVideo:\n                    action.value[1] === 'video'\n                      ? remoteTrackState.subbed\n                      : (user.hasVideo as remoteTrackState)\n                }\n              }\n            }),\n            max: state.max\n          }\n        }\n      }\n      break\n    case 'user-left':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0].uid) {\n          const minUpdate = [...state.min]\n          stateUpdate = {\n            max: [minUpdate.pop() as UIKitUser],\n            min: minUpdate\n          }\n        } else {\n          stateUpdate = {\n            min: state.min.filter((user) => user.uid !== action.value[0].uid),\n            max: state.max\n          }\n        }\n      }\n      break\n    case 'user-swap':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0].uid) {\n        } else {\n          stateUpdate = {\n            max: [action.value[0]],\n            min: [\n              ...state.min.filter(\n                (user: UIKitUser) => user.uid !== action.value[0].uid\n              ),\n              state.max[0]\n            ]\n          }\n        }\n      }\n      break\n    case 'local-user-mute-video':\n      if (actionTypeGuard(action, action.type)) {\n        stateUpdate = {\n          min: state.min.map((user: UIKitUser) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: user.hasAudio as ToggleState,\n                hasVideo: action.value[0]\n              }\n            } else {\n              return user\n            }\n          }),\n          max: state.max.map((user: UIKitUser) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: user.hasAudio as ToggleState,\n                hasVideo: action.value[0]\n              }\n            } else {\n              return user\n            }\n          })\n        }\n      }\n      break\n    case 'local-user-mute-audio':\n      if (actionTypeGuard(action, action.type)) {\n        stateUpdate = {\n          min: state.min.map((user) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: action.value[0],\n                hasVideo: user.hasVideo as ToggleState\n              }\n            } else {\n              return user\n            }\n          }),\n          max: state.max.map((user) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: action.value[0],\n                hasVideo: user.hasVideo as ToggleState\n              }\n            } else {\n              return user\n            }\n          })\n        }\n      }\n      break\n    case 'remote-user-mute-video':\n      if (actionTypeGuard(action, action.type)) {\n        // window['track'] = action.value.videoTrack\n        // window['client'] = client\n        stateUpdate = {\n          min: state.min.map((user: UIKitUser) => {\n            if (user.uid === action.value[0].uid) {\n              return {\n                uid: user.uid,\n                hasVideo: action.value[1],\n                hasAudio: user.hasAudio\n              } as RemoteUIKitUser\n            } else return user\n          }),\n          max: state.max.map((user: UIKitUser) => {\n            if (user.uid === action.value[0].uid)\n              return {\n                uid: user.uid,\n                hasVideo: action.value[1],\n                hasAudio: user.hasAudio\n              } as RemoteUIKitUser\n            else return user\n          })\n        }\n      }\n      break\n    case 'remote-user-mute-audio':\n      if (actionTypeGuard(action, action.type)) {\n        stateUpdate = {\n          min: state.min.map((user: UIKitUser) => {\n            if (user.uid === action.value[0].uid)\n              return {\n                uid: user.uid,\n                hasAudio: action.value[1],\n                hasVideo: user.hasVideo\n              } as RemoteUIKitUser\n            else return user\n          }),\n          max: state.max.map((user: UIKitUser) => {\n            if (user.uid === action.value[0].uid)\n              return {\n                uid: user.uid,\n                hasAudio: action.value[1],\n                hasVideo: user.hasVideo\n              } as RemoteUIKitUser\n            else return user\n          })\n        }\n      }\n      break\n    case 'leave-channel':\n      stateUpdate = initState\n      break\n    case 'ActiveSpeaker':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0]) {\n          stateUpdate = { ...state }\n        } else {\n          stateUpdate = {\n            max: [\n              state.min.find(\n                (user) => user.uid === action.value[0]\n              ) as UIKitUser\n            ],\n            min: [\n              ...state.min.filter(\n                (user: UIKitUser) => user.uid !== action.value[0]\n              ),\n              state.max[0]\n            ]\n          }\n        }\n      }\n      break\n  }\n\n  // console.log('!state-update', { ...state, ...stateUpdate }, stateUpdate)\n  return { ...state, ...stateUpdate }\n}\n\nexport default reducer\n","import React, {\n  useState,\n  useEffect,\n  useContext,\n  useRef,\n  useReducer\n} from 'react'\nimport { RtcProvider } from './RtcContext'\nimport PropsContext, {\n  RtcPropsInterface,\n  UIKitUser,\n  mediaStore,\n  layout,\n  CallbacksInterface\n} from './PropsContext'\nimport { MaxUidProvider } from './MaxUidContext'\nimport { createClient, UID } from 'agora-rtc-react'\nimport { MinUidProvider } from './MinUidContext'\nimport TracksContext from './TracksContext'\nimport reducer, { initState } from './Reducer'\n\nconst useClient = createClient({ codec: 'vp8', mode: 'live' }) // pass in another client if use h264\n/**\n * React component that contains the RTC logic. It manages the user state and provides it the children components by wrapping them with context providers.\n */\nconst RtcConfigure: React.FC<Partial<RtcPropsInterface>> = (props) => {\n  const uid = useRef<UID>()\n  const { localVideoTrack, localAudioTrack } = useContext(TracksContext)\n  const { callbacks, rtcProps } = useContext(PropsContext)\n  const [ready, setReady] = useState<boolean>(false)\n  const [channelJoined, setChannelJoined] = useState<boolean>(false)\n  let joinRes: ((arg0: boolean) => void) | null = null // Resolve for canJoin -> to set canJoin to true\n  const canJoin = useRef(\n    new Promise<boolean | void>((resolve, reject) => {\n      joinRes = resolve\n      console.log(reject)\n    })\n  )\n\n  let client = useClient()\n  if (rtcProps.customRtcClient) {\n    // if customRtcClient prop is set then use custom client\n    client.removeAllListeners()\n    client = rtcProps.customRtcClient\n  }\n\n  let localVideoTrackHasPublished = false\n  let localAudioTrackHasPublished = false\n\n  const mediaStore = useRef<mediaStore>({})\n\n  let { callActive } = props\n  if (callActive === undefined) {\n    callActive = true\n  }\n\n  type stateType = { max: UIKitUser[]; min: UIKitUser[] }\n  const [uidState, dispatch] = useReducer<React.Reducer<stateType, any>>(\n    reducer,\n    initState\n  )\n\n  // init rtcEngine\n  useEffect(() => {\n    async function init() {\n      try {\n        console.log(client)\n        client.on('user-joined', async (...args) => {\n          const [remoteUser] = args\n          mediaStore.current[remoteUser.uid] = {}\n          dispatch({\n            type: 'user-joined',\n            value: args\n          })\n        })\n\n        client.on('user-published', async (...args) => {\n          // Get current peer IDs\n          const [remoteUser, mediaType] = args\n          console.log('user-published', remoteUser.uid)\n          client\n            .subscribe(remoteUser, mediaType)\n            .then((_e) => {\n              // console.log('subscribe', e)\n              mediaStore.current[remoteUser.uid][mediaType + 'Track'] =\n                remoteUser[mediaType + 'Track']\n              if (mediaType === 'audio') {\n                // eslint-disable-next-line no-unused-expressions\n                remoteUser.audioTrack?.play()\n              } else {\n                if (rtcProps.enableDualStream && rtcProps.dualStreamMode) {\n                  client.setStreamFallbackOption(\n                    remoteUser.uid,\n                    rtcProps.dualStreamMode\n                  )\n                }\n              }\n              dispatch({\n                type: 'user-published',\n                value: args\n              })\n            })\n            .catch((e) => console.log(e))\n          // }\n        })\n\n        client.on('user-unpublished', async (...args) => {\n          const [remoteUser, mediaType] = args\n          console.log('user-unpublished', remoteUser.uid)\n          if (mediaType === 'audio') {\n            // eslint-disable-next-line no-unused-expressions\n            remoteUser.audioTrack?.stop()\n          }\n          dispatch({\n            type: 'user-unpublished',\n            value: args\n          })\n        })\n\n        client.on('connection-state-change', async (...args) => {\n          const [curState, prevState, reason] = args\n          console.log('connection', prevState, curState, reason)\n          if (curState === 'CONNECTED') {\n            setChannelJoined(true)\n          } else if (curState === 'DISCONNECTED') {\n            dispatch({ type: 'leave-channel', value: null })\n          } else {\n            setChannelJoined(false)\n          }\n        })\n\n        client.on('user-left', (...args) => {\n          dispatch({\n            type: 'user-left',\n            value: args\n          })\n        })\n\n        if (rtcProps.tokenUrl) {\n          const { tokenUrl, channel, uid } = rtcProps\n          client.on('token-privilege-will-expire', async () => {\n            console.log('token will expire')\n            const res = await fetch(\n              tokenUrl + '/rtc/' + channel + '/publisher/uid/' + (uid || 0) + '/'\n            )\n            const data = await res.json()\n            const token = data.rtcToken\n            client.renewToken(token)\n          })\n\n          client.on('token-privilege-did-expire', async () => {\n            const res = await fetch(\n              tokenUrl + '/rtc/' + channel + '/publisher/uid/' + (uid || 0) + '/'\n            )\n            const data = await res.json()\n            const token = data.rtcToken\n            client.renewToken(token)\n          })\n        }\n\n        if (callbacks) {\n          const events: [keyof CallbacksInterface] = Object.keys(\n            callbacks\n          ) as any\n          // !!!! fix type, validate event\n          events.map((e) => {\n            try {\n              client.on(e, (...args: any[]) => {\n                ;(callbacks[e] as Function).apply(null, args)\n              })\n            } catch (e) {\n              console.log(e)\n            }\n          })\n        }\n        ;(joinRes as (arg0: boolean) => void)(true)\n        setReady(true)\n      } catch (e) {\n        console.log(e)\n      }\n    }\n\n    if (joinRes) {\n      init()\n      return () => {\n        try {\n          client.removeAllListeners()\n        } catch (e) {\n          console.log(e)\n        }\n      }\n    } else return () => {}\n  }, [rtcProps.appId]) //, ready])\n\n  // Dynamically switches channel when channel prop changes\n  useEffect(() => {\n    async function join(): Promise<void> {\n      await canJoin.current\n      const { tokenUrl, channel, uid: userUid, appId, token } = rtcProps\n      if (client) {\n        if (rtcProps.role === 'audience') {\n          client.setClientRole(rtcProps.role)\n        } else {\n          client.setClientRole('host')\n        }\n        if (tokenUrl) {\n          try {\n            const res = await fetch(\n              tokenUrl +\n                '/rtc/' +\n                channel +\n                '/publisher/uid/' +\n                (userUid || 0) +\n                '/'\n            )\n            const data = await res.json()\n            const token = data.rtcToken\n            uid.current = await client.join(appId, channel, token, userUid || 0)\n          } catch (e) {\n            console.log(e)\n          }\n        } else {\n          uid.current = await client.join(\n            appId,\n            channel,\n            token || null,\n            userUid || 0\n          )\n        }\n        // console.log('!uid: ', uid.current)\n      } else {\n        console.error('trying to join before RTC Engine was initialized')\n      }\n    }\n    if (callActive) {\n      join()\n      console.log('Attempted join: ', rtcProps.channel)\n    } else {\n      console.log('In precall - waiting to join')\n    }\n    return (): void => {\n      if (callActive) {\n        console.log('Leaving channel')\n        canJoin.current = client\n          .leave()\n          .catch((err: unknown) => console.log(err))\n      }\n    }\n  }, [rtcProps.channel, rtcProps.uid, callActive, rtcProps.tokenUrl])\n\n  // publish local stream\n  useEffect(() => {\n    async function publish() {\n      if (rtcProps.enableDualStream) {\n        await client.enableDualStream()\n      }\n      // handle publish fail if track is not enabled\n      if (localAudioTrack?.enabled && channelJoined) {\n        if (!localAudioTrackHasPublished) {\n          await client.publish([localAudioTrack]).then(() => {\n            localAudioTrackHasPublished = true\n          })\n        }\n      }\n      if (localVideoTrack?.enabled && channelJoined) {\n        if (!localVideoTrackHasPublished) {\n          await client.publish([localVideoTrack]).then(() => {\n            localVideoTrackHasPublished = true\n          })\n        }\n      }\n    }\n    console.log('Publish', localVideoTrack, localAudioTrack, callActive)\n    if (callActive) {\n      publish()\n    }\n  }, [\n    callActive,\n    localVideoTrack?.enabled,\n    localAudioTrack?.enabled,\n    channelJoined\n  ])\n\n  // update local state if tracks are not null\n  useEffect(() => {\n    if (localVideoTrack && localAudioTrack !== (null && undefined)) {\n      mediaStore.current[0] = {\n        audioTrack: localAudioTrack,\n        videoTrack: localVideoTrack\n      }\n      dispatch({\n        type: 'update-user-video',\n        value: [localAudioTrack, localVideoTrack]\n      })\n    }\n  }, [rtcProps.channel, channelJoined])\n\n  // renew token if token is updated\n  useEffect(() => {\n    if (channelJoined && rtcProps.token) {\n      client\n        .renewToken(rtcProps.token)\n        .then((e) => console.log('renewed token', e))\n    }\n  }, [rtcProps.token, channelJoined])\n\n  // set role if role is updated\n  useEffect(() => {\n    if (rtcProps.role) {\n      client\n        .setClientRole(rtcProps.role)\n        .then((e) => console.log('changed role', e))\n    }\n  }, [rtcProps.role, channelJoined])\n\n  // active speaker\n  useEffect(() => {\n    async function enableActiveSpeaker() {\n      if (rtcProps.activeSpeaker && rtcProps.layout !== layout.grid) {\n        client.on('volume-indicator', (volumes) => {\n          const highestvolumeObj = volumes.reduce(\n            (\n              highestVolume: {\n                level: number\n                uid: UID\n              },\n              volume\n            ) => {\n              if (highestVolume === null) {\n                return volume\n              } else {\n                if (volume.level > highestVolume.level) {\n                  return volume\n                }\n                return highestVolume\n              }\n            },\n            null\n          )\n          const activeSpeaker = highestvolumeObj\n            ? highestvolumeObj.uid\n            : undefined\n          const mapActiveSpeakerToZero =\n            activeSpeaker === uid.current ? 0 : activeSpeaker\n          if (activeSpeaker !== undefined) {\n            dispatch({\n              type: 'ActiveSpeaker',\n              value: [mapActiveSpeakerToZero]\n            })\n          }\n        })\n        await client.enableAudioVolumeIndicator()\n      }\n    }\n    if (callActive) {\n      enableActiveSpeaker()\n    }\n    return () => {\n      client.removeAllListeners('volume-indicator')\n    }\n  }, [rtcProps.activeSpeaker, rtcProps.layout])\n\n  return (\n    <RtcProvider\n      value={{\n        client,\n        mediaStore: mediaStore.current,\n        localVideoTrack,\n        localAudioTrack,\n        dispatch,\n        localUid: uid,\n        channelJoined\n      }}\n    >\n      <MaxUidProvider value={uidState.max}>\n        <MinUidProvider value={uidState.min}>\n          {/* <MinUidProvider value={uidState.min}> */}\n          {ready ? props.children : null}\n        </MinUidProvider>\n      </MaxUidProvider>\n    </RtcProvider>\n  )\n}\n\nexport default RtcConfigure\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport React from 'react'\n\nconst icons = {\n  videocam: <FontAwesomeIcon icon='fa-solid fa-video' color='#FFF' />,\n  videocamOff: <FontAwesomeIcon icon='fa-solid fa-video-slash' color='#FFF' />,\n  remoteSwap: (\n    <React.Fragment>\n      <polyline points='15 3 21 3 21 9' />\n      <polyline points='9 21 3 21 3 15' />\n      <line x1='21' y1='3' x2='14' y2='10' />\n      <line x1='3' y1='21' x2='10' y2='14' />\n    </React.Fragment>\n  ),\n  callEnd: (\n    <React.Fragment>\n      <path d='M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91' />\n      <line x1='23' y1='1' x2='1' y2='23' />\n    </React.Fragment>\n  ),\n  mic: (\n    <React.Fragment>\n      <path d='M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z' />\n      <path d='M19 10v2a7 7 0 0 1-14 0v-2' />\n      <line x1='12' y1='19' x2='12' y2='23' />\n      <line x1='8' y1='23' x2='16' y2='23' />\n    </React.Fragment>\n  ),\n  micOff: (\n    <React.Fragment>\n      <line x1='1' y1='1' x2='23' y2='23' />\n      <path d='M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6' />\n      <path d='M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23' />\n      <line x1='12' y1='19' x2='12' y2='23' />\n      <line x1='8' y1='23' x2='16' y2='23' />\n    </React.Fragment>\n  )\n}\n\nexport default icons\n","const iconsColors = {\n  videocam: '#FFF',\n  videocamOff: 'blue',\n  remoteSwap: 'yellow',\n  callEnd: 'red',\n  mic: 'green',\n  micOff: '#A3A3A3'\n}\n\nexport default iconsColors\n","import React, { useContext } from 'react'\nimport PropsContext from '../PropsContext'\nimport Icons from './Icons'\nimport iconsColors from './IconsColors'\ninterface BtnTemplateInterface {\n  name: string\n  color?: string\n  onClick: () => void\n  disabled?: boolean\n  style?: React.CSSProperties\n}\n\nconst BtnTemplate = (props: BtnTemplateInterface) => {\n  const { onClick, name, disabled, style } = props\n  const { styleProps } = useContext(PropsContext)\n  const { theme, BtnTemplateStyles, iconSize, customIcon } = styleProps || {}\n\n  return (\n    <div\n      style={{\n        ...{\n          width: 35,\n          height: 35,\n          borderRadius: '100%',\n          borderColor: 'transparent',\n          backgroundColor: iconsColors[name],\n          alignItems: 'center',\n          justifyContent: 'center',\n          display: 'flex',\n          cursor: disabled ? 'auto' : 'pointer',\n          margin: 4\n        },\n        ...BtnTemplateStyles,\n        ...style\n      }}\n      onClick={onClick}\n    >\n      {customIcon ? (\n        <img src={customIcon[name]} alt={name} />\n      ) : (\n        <svg\n          style={{\n            width: iconSize || 24,\n            height: iconSize || 24\n          }}\n          xmlns='http://www.w3.org/2000/svg'\n          width='48'\n          height='48'\n          viewBox='0 0 24 24'\n          fill='none'\n          opacity={disabled ? '0.5' : '1'}\n          stroke={theme || '#fff'}\n          strokeWidth='2'\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          // className='feather feather-video'\n        >\n          {Icons[name]}\n        </svg>\n      )}\n    </div>\n  )\n}\n\nexport default BtnTemplate\n","import React, { useContext, createContext } from 'react'\nimport MaxUidContext from './MaxUidContext'\nimport MinUidContext from './MinUidContext'\nimport { LocalUIKitUser } from './PropsContext'\n\nexport const LocalContext = createContext<LocalUIKitUser>({} as LocalUIKitUser)\nexport const LocalProvider = LocalContext.Provider\nexport const LocalConsumer = LocalContext.Consumer\n\ninterface LocalUserContextInterface {\n  children: React.ReactNode\n}\n/**\n * React context that exposes the {@link LocalUIKitUser} data object\n */\nconst LocalUserContext: React.FC<LocalUserContextInterface> = (props) => {\n  const max = useContext(MaxUidContext)\n  const min = useContext(MinUidContext)\n\n  let localUser: LocalUIKitUser\n  if (max[0].uid === 0) {\n    localUser = max[0] as LocalUIKitUser\n  } else {\n    localUser = min.find((u) => u.uid === 0) as LocalUIKitUser\n  }\n  return (\n    <LocalContext.Provider value={localUser}>\n      {props.children}\n    </LocalContext.Provider>\n  )\n}\n\nexport default LocalUserContext\n","import { DispatchType } from '../../RtcContext'\nimport { LocalUIKitUser, ToggleState } from '../../PropsContext'\nimport { ILocalAudioTrack } from 'agora-rtc-react'\n\nexport default async (\n  user: LocalUIKitUser,\n  dispatch: DispatchType,\n  localAudioTrack: ILocalAudioTrack\n) => {\n  // console.log('!mute audio', user)\n  if (user.uid === 0) {\n    const localState = user.hasAudio\n    if (\n      localState === ToggleState.enabled ||\n      localState === ToggleState.disabled\n    ) {\n      // Disable UI\n      dispatch({\n        type: 'local-user-mute-audio',\n        value: [\n          localState === ToggleState.enabled\n            ? ToggleState.disabling\n            : ToggleState.enabling\n        ]\n      })\n      try {\n        await localAudioTrack?.setEnabled(localState !== ToggleState.enabled)\n        // console.log('muted audio', localState)\n        // Enable UI\n        dispatch({\n          type: 'local-user-mute-audio',\n          value: [\n            localState === ToggleState.enabled\n              ? ToggleState.disabled\n              : ToggleState.enabled\n          ]\n        })\n      } catch (e) {\n        dispatch({\n          type: 'local-user-mute-audio',\n          value: [localState]\n        })\n      }\n    }\n  }\n}\n","import React, { useContext } from 'react'\nimport RtcContext from '../../RtcContext'\nimport BtnTemplate from '../BtnTemplate'\nimport { LocalContext } from '../../LocalUserContext'\nimport PropsContext, { ToggleState } from '../../PropsContext'\nimport muteAudio from './muteAudio'\n\nfunction LocalAudioMute() {\n  const { styleProps } = useContext(PropsContext)\n  const { localBtnStyles } = styleProps || {}\n  const { muteLocalAudio } = localBtnStyles || {}\n  const { dispatch, localAudioTrack } = useContext(RtcContext)\n  const local = useContext(LocalContext)\n\n  return (\n    <div>\n      <BtnTemplate\n        style={muteLocalAudio}\n        name={local.hasAudio === ToggleState.enabled ? 'mic' : 'micOff'}\n        onClick={() =>\n          localAudioTrack && muteAudio(local, dispatch, localAudioTrack)\n        }\n      />\n    </div>\n  )\n}\n\nexport default LocalAudioMute\n","import { DispatchType } from '../../RtcContext'\nimport { LocalUIKitUser, ToggleState } from '../../PropsContext'\nimport { ILocalVideoTrack } from 'agora-rtc-react'\n\nexport default async (\n  user: LocalUIKitUser,\n  dispatch: DispatchType,\n  localVideoTrack: ILocalVideoTrack\n) => {\n  if (user.uid === 0) {\n    const localState = user.hasVideo\n    if (\n      localState === ToggleState.enabled ||\n      localState === ToggleState.disabled\n    ) {\n      // Disable UI\n      dispatch({\n        type: 'local-user-mute-video',\n        value: [\n          localState === ToggleState.enabled\n            ? ToggleState.disabling\n            : ToggleState.enabling\n        ]\n      })\n      try {\n        await localVideoTrack?.setEnabled(localState !== ToggleState.enabled)\n        // Enable UI\n        dispatch({\n          type: 'local-user-mute-video',\n          value: [\n            localState === ToggleState.enabled\n              ? ToggleState.disabled\n              : ToggleState.enabled\n          ]\n        })\n      } catch (e) {\n        dispatch({\n          type: 'local-user-mute-video',\n          value: [localState]\n        })\n      }\n    }\n  }\n}\n","import React, { useContext } from 'react'\nimport RtcContext from '../../RtcContext'\nimport BtnTemplate from '../BtnTemplate'\nimport { LocalContext } from '../../LocalUserContext'\nimport PropsContext, { ToggleState } from '../../PropsContext'\nimport muteVideo from './muteVideo'\n\nfunction LocalVideoMute() {\n  const { styleProps } = useContext(PropsContext)\n  const { localBtnStyles } = styleProps || {}\n  const { muteLocalVideo } = localBtnStyles || {}\n  const { dispatch, localVideoTrack } = useContext(RtcContext)\n  const local = useContext(LocalContext)\n\n  return (\n    <div>\n      <BtnTemplate\n        style={muteLocalVideo}\n        name={\n          local.hasVideo === ToggleState.enabled ? 'videocam' : 'videocamOff'\n        }\n        onClick={() =>\n          localVideoTrack && muteVideo(local, dispatch, localVideoTrack)\n        }\n      />\n    </div>\n  )\n}\n\nexport default LocalVideoMute\n","import React, { useContext } from 'react'\nimport LocalAudioMute from './Local/LocalAudioMute'\nimport LocalVideoMute from './Local/LocalVideoMute'\nimport PropsContext from '../PropsContext'\n\nfunction LocalControls() {\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const { localBtnContainer } = styleProps || {}\n\n  return (\n    <div\n      style={{\n        ...{\n          width: '100%',\n          height: 70,\n          zIndex: 10,\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'space-evenly',\n          alignItems: 'center'\n        },\n        ...localBtnContainer\n      }}\n    >\n      {rtcProps.role !== 'audience' && <LocalVideoMute />}\n      {rtcProps.role !== 'audience' && <LocalAudioMute />}\n    </div>\n  )\n}\n\nexport default LocalControls\n","import { UID } from 'agora-rtc-react'\nimport { RtmClient, RtmEvents } from 'agora-rtm-react'\nimport { createContext } from 'react'\n\n/**\n * Callbacks to pass to RTM events\n */\nexport type rtmCallbacks = {\n  channel?: Partial<RtmEvents.RtmChannelEvents>\n  client?: Partial<RtmEvents.RtmClientEvents>\n}\n\nexport enum rtmStatusEnum {\n  // Initialisation failed\n  initFailed,\n  // Login has not been attempted\n  offline,\n  // RTM is initialising, process is not yet complete\n  initialising,\n  // Currently attempting to log in\n  loggingIn,\n  // RTM has logged in\n  loggedIn,\n  // RTM is logged in, and connected to the current channel\n  connected,\n  // RTM Login Failed\n  loginFailed\n}\n\nexport type messageType = 'UserData' | 'MuteRequest'\n\nexport type messageObject = userData | muteRequest | genericAction\n\nexport enum clientRoleRaw {\n  broadcaster,\n  audience\n}\n\nexport enum mutingDevice {\n  camera,\n  microphone\n}\n\nexport type genericAction = {\n  messageType: 'RtmDataRequest'\n  type: 'ping' | 'pong' | 'userData'\n}\n\nexport type muteRequest = {\n  messageType: 'MuteRequest'\n  rtcId: UID\n  mute: boolean\n  device: mutingDevice\n  isForceful: boolean\n}\n\nexport type userData = {\n  messageType: 'UserData'\n  rtmId: string\n  rtcId: UID\n  username?: string\n  role: clientRoleRaw\n  uikit: {\n    platform: string\n    framework: string\n    version: string\n  }\n  agora: {\n    rtm: string\n    rtc: string\n  }\n}\n\nexport enum popUpStateEnum {\n  closed,\n  muteMic,\n  muteCamera,\n  unmuteMic,\n  unmuteCamera\n}\n/**\n * Interface for RTM Context\n */\ninterface rtmContext {\n  /**\n   * rtm connection status\n   */\n  rtmStatus: rtmStatusEnum\n  /**\n   * send message to everyone in the channel\n   */\n  sendChannelMessage: (msg: messageObject) => void\n  /**\n   * send message to a specific user\n   */\n  sendPeerMessage: (msg: messageObject, uid: string) => void\n  /**\n   * RTM Client instance\n   */\n  rtmClient: RtmClient\n  /**\n   * map with userdata for each rtc uid in the channel\n   */\n  userDataMap: Object\n  /**\n   * map with rtm uid for each rtc uid in the channel\n   */\n  uidMap: Object\n  /**\n   * Send a mute request\n   */\n  sendMuteRequest: (device: mutingDevice, rtcId: UID, mute: boolean) => void\n  /**\n   * RTM usernames\n   */\n  usernames: {}\n  /**\n   * state to display pop up on remote mute request\n   */\n  popUpState: popUpStateEnum\n  /**\n   * set state to hide pop up\n   */\n  setPopUpState: React.Dispatch<React.SetStateAction<popUpStateEnum>>\n}\n/**\n * Context to access RTM data. It's setup by {@link RtmConfigure}.\n */\nconst RtmContext = createContext(null as unknown as rtmContext)\n\nexport const RtmProvider = RtmContext.Provider\nexport const RtmConsumer = RtmContext.Consumer\nexport default RtmContext\n","import React, { useContext } from 'react'\nimport BtnTemplate from '../BtnTemplate'\nimport PropsContext, { remoteTrackState, UIKitUser } from '../../PropsContext'\nimport RtmContext, { mutingDevice } from '../../RtmContext'\n\nfunction RemoteVideoMute(props: { UIKitUser: UIKitUser }) {\n  const { styleProps } = useContext(PropsContext)\n  const { sendMuteRequest, uidMap } = useContext(RtmContext)\n  const { remoteBtnStyles } = styleProps || {}\n  const { muteRemoteVideo } = remoteBtnStyles || {}\n  const { UIKitUser } = props\n  const isMuted = UIKitUser.hasVideo === remoteTrackState.no\n\n  return UIKitUser.uid !== 0 && uidMap[UIKitUser.uid] ? (\n    <div>\n      <BtnTemplate\n        name={\n          UIKitUser.hasVideo === remoteTrackState.subbed\n            ? 'videocam'\n            : 'videocamOff'\n        }\n        style={muteRemoteVideo}\n        onClick={() =>\n          sendMuteRequest(mutingDevice.camera, UIKitUser.uid, !isMuted)\n        }\n      />\n    </div>\n  ) : null\n}\n\nexport default RemoteVideoMute\n","import React, { useContext } from 'react'\nimport BtnTemplate from '../BtnTemplate'\nimport PropsContext, { remoteTrackState, UIKitUser } from '../../PropsContext'\nimport RtmContext, { mutingDevice } from '../../RtmContext'\n\nfunction RemoteAudioMute(props: { UIKitUser: UIKitUser }) {\n  const { styleProps } = useContext(PropsContext)\n  const { remoteBtnStyles } = styleProps || {}\n  const { sendMuteRequest, uidMap } = useContext(RtmContext)\n  const { muteRemoteAudio } = remoteBtnStyles || {}\n  const { UIKitUser } = props\n  const isMuted = UIKitUser.hasAudio === remoteTrackState.no\n\n  return UIKitUser.uid !== 0 && uidMap[UIKitUser.uid] ? (\n    <div>\n      <BtnTemplate\n        style={muteRemoteAudio}\n        name={UIKitUser.hasAudio === remoteTrackState.subbed ? 'mic' : 'micOff'}\n        onClick={() =>\n          sendMuteRequest(mutingDevice.microphone, UIKitUser.uid, !isMuted)\n        }\n      />\n    </div>\n  ) : null\n}\n\nexport default RemoteAudioMute\n","import React, { useContext } from 'react'\nimport RtcContext from './../RtcContext'\nimport BtnTemplate from './BtnTemplate'\nimport { UIKitUser } from './../PropsContext'\n\nfunction SwapUser(props: { UIKitUser: UIKitUser }) {\n  const { dispatch } = useContext(RtcContext)\n  const { UIKitUser } = props\n\n  return (\n    <div>\n      <BtnTemplate\n        name='remoteSwap'\n        onClick={() => dispatch({ type: 'user-swap', value: [UIKitUser] })}\n      />\n    </div>\n  )\n}\n\nexport default SwapUser\n","import React, { useContext } from 'react'\nimport RemoteVideoMute from './Controls/Remote/RemoteVideoMute'\nimport RemoteAudioMute from './Controls/Remote/RemoteAudioMute'\nimport PropsContext, { VideoPlaceholderProps } from './PropsContext'\nimport SwapUser from './Controls/SwapUser'\n/**\n * React component that is renderd when the video track is muted.\n */\nconst VideoPlaceholder = (props: VideoPlaceholderProps) => {\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const { maxViewStyles, maxViewOverlayContainer } = styleProps || {}\n  const { user } = props\n  const { CustomVideoPlaceholder } = rtcProps\n\n  return !CustomVideoPlaceholder ? (\n    <div\n      key={user.uid}\n      style={{\n        ...style.max,\n        ...maxViewStyles\n      }}\n    >\n      <div style={style.imgContainer}>\n        <img\n          style={style.img}\n          src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJmZWF0aGVyIGZlYXRoZXItdXNlciI+PHBhdGggZD0iTTIwIDIxdi0yYTQgNCAwIDAgMC00LTRIOGE0IDQgMCAwIDAtNCA0djIiPjwvcGF0aD48Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiPjwvY2lyY2xlPjwvc3ZnPg=='\n        />\n      </div>\n      {props.isShown && (\n        <div\n          style={{\n            ...style.btnContainer,\n            ...maxViewOverlayContainer\n          }}\n        >\n          {props.showButtons && (\n            <React.Fragment>\n              {!rtcProps.disableRtm && <RemoteVideoMute UIKitUser={user} />}\n              {!rtcProps.disableRtm && <RemoteAudioMute UIKitUser={user} />}\n              {props.showSwap && <SwapUser UIKitUser={user} />}\n            </React.Fragment>\n          )}\n        </div>\n      )}\n    </div>\n  ) : (\n    CustomVideoPlaceholder && CustomVideoPlaceholder({ ...props }, null)\n  )\n}\n\nconst style = {\n  max: {\n    flex: 1,\n    display: 'flex',\n    backgroundColor: '#007bff33',\n    flexDirection: 'row',\n    position: 'relative'\n  } as React.CSSProperties,\n  imgContainer: {\n    flex: 10,\n    display: 'flex',\n    justifyContent: 'center'\n  },\n  img: {\n    width: 100,\n    height: 100,\n    position: 'absolute',\n    alignSelf: 'center',\n    justifySelf: 'center',\n    margin: 'auto',\n    display: 'flex'\n  } as React.CSSProperties,\n  btnContainer: {\n    position: 'absolute',\n    margin: 5,\n    flexDirection: 'column',\n    display: 'flex'\n  } as React.CSSProperties\n}\n\nexport default VideoPlaceholder\n","import React, { CSSProperties, useContext } from 'react'\nimport RtmContext from './RtmContext'\nimport PropsContext, { UIKitUser } from './PropsContext'\n\nconst Username = (props: { user: UIKitUser; style?: React.CSSProperties }) => {\n  const { usernames } = useContext(RtmContext)\n  const { rtmProps, styleProps } = useContext(PropsContext)\n  const { user } = props\n\n  return rtmProps?.displayUsername ? (\n    <p style={{ ...styles.username, ...styleProps?.usernameText }}>\n      {usernames[user.uid]}\n    </p>\n  ) : (\n    <React.Fragment />\n  )\n}\n\nconst styles = {\n  username: {\n    position: 'absolute',\n    background: '#007bffaa',\n    padding: '2px 8px',\n    color: '#fff',\n    margin: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 90\n  } as CSSProperties\n}\n\nexport default Username\n","import React, { CSSProperties, useContext, useState } from 'react'\nimport RtcContext from './RtcContext'\nimport { AgoraVideoPlayer, IRemoteVideoTrack } from 'agora-rtc-react'\nimport RemoteVideoMute from './Controls/Remote/RemoteVideoMute'\nimport RemoteAudioMute from './Controls/Remote/RemoteAudioMute'\nimport PropsContext, { UIKitUser } from './PropsContext'\nimport VideoPlaceholder from './VideoPlaceholder'\nimport Username from './Username'\n/**\n * React component to display the user video in maximized view\n */\nconst MaxVideoView = (props: {\n  user: UIKitUser\n  style?: React.CSSProperties\n}) => {\n  const { mediaStore } = useContext(RtcContext)\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const { maxViewStyles, videoMode, maxViewOverlayContainer } = styleProps || {}\n  const renderModeProp = videoMode?.max\n  const [isShown, setIsShown] = useState(false)\n  const { user } = props\n\n  return (\n    <div\n      style={{\n        ...styles.container,\n        ...props.style,\n        ...maxViewStyles\n      }}\n      onMouseEnter={() => setIsShown(true)}\n      onMouseLeave={() => setIsShown(false)}\n    >\n      {user.hasVideo === 1 ? (\n        // hasVideo is 1 if the local user has video enabled, or if remote user video is subbed\n        <div style={styles.videoContainer}>\n          {!rtcProps.disableRtm && <Username user={user} />}\n          <AgoraVideoPlayer\n            style={styles.videoplayer}\n            config={{\n              fit: renderModeProp || 'cover'\n            }}\n            videoTrack={mediaStore[user.uid].videoTrack as IRemoteVideoTrack}\n          />\n          {isShown && (\n            <div\n              style={{\n                ...styles.overlay,\n                ...maxViewOverlayContainer\n              }}\n            >\n              {!rtcProps.disableRtm && <RemoteVideoMute UIKitUser={user} />}\n              {!rtcProps.disableRtm && <RemoteAudioMute UIKitUser={user} />}\n            </div>\n          )}\n        </div>\n      ) : (\n        <div style={styles.videoContainer}>\n          {!rtcProps.disableRtm && <Username user={user} />}\n          <VideoPlaceholder user={user} isShown={isShown} showButtons />\n        </div>\n      )}\n    </div>\n  )\n}\n\nconst styles = {\n  container: { display: 'flex', flex: 1 },\n  videoContainer: {\n    display: 'flex',\n    flex: 1,\n    position: 'relative'\n  } as CSSProperties,\n  videoplayer: {\n    width: '100%',\n    display: 'flex',\n    flex: 1\n  },\n  overlay: {\n    position: 'absolute',\n    margin: 5,\n    flexDirection: 'column',\n    display: 'flex'\n  } as CSSProperties,\n  username: {\n    position: 'absolute',\n    background: '#007bffaa',\n    padding: '2px 8px',\n    color: '#fff',\n    margin: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 90\n  } as CSSProperties\n}\n\nexport default MaxVideoView\n","import React, { useContext, useState } from 'react'\nimport RtcContext from './RtcContext'\nimport { AgoraVideoPlayer, IRemoteVideoTrack } from 'agora-rtc-react'\nimport RemoteVideoMute from './Controls/Remote/RemoteVideoMute'\nimport RemoteAudioMute from './Controls/Remote/RemoteAudioMute'\nimport SwapUser from './Controls/SwapUser'\nimport PropsContext, { UIKitUser } from './PropsContext'\nimport VideoPlaceholder from './VideoPlaceholder'\n\n/**\n * React context to expose user array displayed in the smaller view\n */\nconst MinVideoView = (props: { user: UIKitUser }) => {\n  const { mediaStore } = useContext(RtcContext)\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const { minViewStyles, videoMode, minViewOverlayContainer } = styleProps || {}\n  const renderModeProp = videoMode?.min\n  const [isShown, setIsShown] = useState(false)\n  const { user } = props\n\n  return (\n    <div\n      style={{\n        ...{ display: 'flex', flex: 1 },\n        ...minViewStyles\n      }}\n      onMouseEnter={() => setIsShown(true)}\n      onMouseLeave={() => setIsShown(false)}\n    >\n      {user.hasVideo === 1 ? (\n        <div\n          style={{\n            ...{\n              display: 'flex',\n              flex: 1,\n              position: 'relative'\n            }\n          }}\n        >\n          <AgoraVideoPlayer\n            style={{ flex: 10, display: 'flex' }}\n            config={{\n              fit: renderModeProp !== undefined ? renderModeProp : 'cover'\n            }}\n            videoTrack={mediaStore[user.uid].videoTrack as IRemoteVideoTrack}\n          />\n          {isShown && (\n            <div\n              style={{\n                ...{\n                  margin: 4,\n                  position: 'absolute',\n                  flex: 1,\n                  display: 'flex',\n                  flexDirection: 'column'\n                },\n                ...minViewOverlayContainer\n              }}\n            >\n              {!rtcProps.disableRtm && <RemoteVideoMute UIKitUser={user} />}\n              {!rtcProps.disableRtm && <RemoteAudioMute UIKitUser={user} />}\n              <SwapUser UIKitUser={user} />\n            </div>\n          )}\n        </div>\n      ) : (\n        <VideoPlaceholder user={user} isShown={isShown} showButtons showSwap />\n      )}\n    </div>\n  )\n}\n\nexport default MinVideoView\n","import React, { useContext, useEffect, useRef, useState } from 'react'\nimport { MinUidConsumer } from './MinUidContext'\nimport { MaxUidConsumer } from './MaxUidContext'\nimport MaxVideoView from './MaxVideoView'\nimport MinVideoView from './MinVideoView'\nimport PropsContext from './PropsContext'\nimport styles from './styles.module.css'\n\n/**\n * React Component to render the user videos in the pinned/spotlight layout\n */\nconst PinnedVideo: React.FC = () => {\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const {\n    minViewContainer,\n    pinnedVideoContainer,\n    maxViewContainer,\n    scrollViewContainer\n  } = styleProps || {}\n  const parentRef = useRef<HTMLDivElement>(null)\n  const [width, setWidth] = useState(0)\n  const [height, setHeight] = useState(0)\n  const isLandscape = width > height\n\n  useEffect(() => {\n    const handleResize = () => {\n      if (parentRef.current) {\n        setWidth(parentRef.current.offsetWidth)\n        setHeight(parentRef.current.offsetHeight)\n      }\n    }\n    window.addEventListener('resize', handleResize)\n    if (parentRef.current) {\n      setWidth(parentRef.current.offsetWidth)\n      setHeight(parentRef.current.offsetHeight)\n    }\n    return () => {\n      window.removeEventListener('resize', handleResize)\n    }\n  }, [])\n\n  return (\n    <div\n      ref={parentRef}\n      style={{\n        ...{\n          display: 'flex',\n          flex: 1,\n          flexDirection: isLandscape ? 'row' : 'column-reverse',\n          overflow: 'hidden'\n        },\n        ...pinnedVideoContainer\n      }}\n    >\n      <div\n        style={{\n          ...{\n            display: 'flex',\n            flex: isLandscape ? 5 : 4\n          },\n          ...maxViewContainer\n        }}\n      >\n        <MaxUidConsumer>\n          {(maxUsers) =>\n            rtcProps.role === 'audience' && maxUsers[0].uid === 0 ? null : (\n              <MaxVideoView user={maxUsers[0]} />\n            )\n          }\n        </MaxUidConsumer>\n      </div>\n      <div\n        className={styles.scrollbar}\n        style={{\n          ...{\n            overflowY: isLandscape ? 'scroll' : 'hidden',\n            overflowX: !isLandscape ? 'scroll' : 'hidden',\n            display: 'flex',\n            flex: 1,\n            flexDirection: isLandscape ? 'column' : 'row',\n            position: 'absolute',\n            width: '22vh',\n            height: '35vh',\n            marginTop: '220px',\n            marginLeft: '370px',\n            borderRadius: '10px'\n          },\n          ...scrollViewContainer\n        }}\n      >\n        <MinUidConsumer>\n          {(minUsers) =>\n            minUsers.map((user) =>\n              rtcProps.role === 'audience' && user.uid === 0 ? null : (\n                <div\n                  style={{\n                    ...{\n                      minHeight: '35vh',\n                      minWidth: '25vh',\n                      display: 'flex',\n                      position: 'absolute',\n                      width: '25vh'\n                    },\n                    ...minViewContainer\n                  }}\n                  key={user.uid}\n                >\n                  <MinVideoView user={user} />\n                </div>\n              )\n            )\n          }\n        </MinUidConsumer>\n      </div>\n    </div>\n  )\n}\n\nexport default PinnedVideo\n","import React, { useContext, useEffect, useRef, useState } from 'react'\nimport MinUidContext from './MinUidContext'\nimport MaxUidContext from './MaxUidContext'\nimport PropsContext from './PropsContext'\nimport MaxVideoView from './MaxVideoView'\n\n/**\n * React Component to render the user videos in a grid\n */\nconst GridVideo: React.FC = () => {\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const { gridVideoCells, gridVideoContainer } = styleProps || {}\n  const max = useContext(MaxUidContext)\n  const min = useContext(MinUidContext)\n  const users =\n    rtcProps.role === 'audience'\n      ? [...max, ...min].filter((user) => user.uid !== 0)\n      : [...max, ...min]\n  const parentRef = useRef<HTMLDivElement>(null)\n  const [width, setWidth] = useState(window.innerWidth)\n  const [height, setHeight] = useState(window.innerHeight)\n  const isLandscape = width > height\n  const unit = 'minmax(0, 1fr) '\n\n  useEffect(() => {\n    const handleResize = () => {\n      if (parentRef.current) {\n        setWidth(parentRef.current.offsetWidth)\n        setHeight(parentRef.current.offsetHeight)\n      }\n    }\n    window.addEventListener('resize', handleResize)\n    if (parentRef.current) {\n      setWidth(parentRef.current.offsetWidth)\n      setHeight(parentRef.current.offsetHeight)\n    }\n    return () => {\n      window.removeEventListener('resize', handleResize)\n    }\n  }, [])\n\n  return (\n    <div\n      ref={parentRef}\n      style={{\n        ...{\n          width: '100%',\n          height: '100%',\n          display: 'grid',\n          gridTemplateColumns: isLandscape\n            ? users.length > 9\n              ? unit.repeat(4)\n              : users.length > 4\n              ? unit.repeat(3)\n              : users.length > 1\n              ? unit.repeat(2)\n              : unit\n            : users.length > 8\n            ? unit.repeat(3)\n            : users.length > 2\n            ? unit.repeat(2)\n            : unit\n        },\n        ...gridVideoContainer\n      }}\n    >\n      {users.map((user) => (\n        <MaxVideoView\n          user={user}\n          style={{ ...{ height: '100%', width: '100%' }, ...gridVideoCells }}\n          key={user.uid}\n        />\n      ))}\n    </div>\n  )\n}\n\nexport default GridVideo\n","import React, { useState, useEffect, useRef } from 'react'\nimport { RtcPropsInterface, mediaStore } from './PropsContext'\nimport {\n  ILocalVideoTrack,\n  ILocalAudioTrack,\n  createMicrophoneAndCameraTracks\n} from 'agora-rtc-react'\nimport { TracksProvider } from './TracksContext'\n\nconst useTracks = createMicrophoneAndCameraTracks(\n  { encoderConfig: {} },\n  { encoderConfig: {} }\n)\n/**\n * React component that create local camera and microphone tracks and assigns them to the child components\n */\nconst TracksConfigure: React.FC<Partial<RtcPropsInterface>> = (props) => {\n  const [ready, setReady] = useState<boolean>(false)\n  const [localVideoTrack, setLocalVideoTrack] =\n    useState<ILocalVideoTrack | null>(null)\n  const [localAudioTrack, setLocalAudioTrack] =\n    useState<ILocalAudioTrack | null>(null)\n  const { ready: trackReady, tracks, error } = useTracks()\n  const mediaStore = useRef<mediaStore>({})\n\n  useEffect(() => {\n    if (tracks !== null) {\n      setLocalAudioTrack(tracks[0])\n      setLocalVideoTrack(tracks[1])\n      mediaStore.current[0] = {\n        audioTrack: tracks[0],\n        videoTrack: tracks[1]\n      }\n      setReady(true)\n    } else if (error) {\n      console.error(error)\n      setReady(false)\n    }\n    return () => {\n      if (tracks) {\n        // eslint-disable-next-line no-unused-expressions\n        tracks[0]?.close()\n        // eslint-disable-next-line no-unused-expressions\n        tracks[1]?.close()\n      }\n    }\n  }, [trackReady, error]) //, ready])\n\n  return (\n    <TracksProvider\n      value={{\n        localVideoTrack: localVideoTrack,\n        localAudioTrack: localAudioTrack\n      }}\n    >\n      {ready ? props.children : null}\n    </TracksProvider>\n  )\n}\n\nexport default TracksConfigure\n","import React, { useState, useContext, useEffect, useRef } from 'react'\nimport AgoraRTM, {\n  createLazyClient,\n  createLazyChannel,\n  RtmEvents,\n  RtmRawMessage\n} from 'agora-rtm-react'\nimport PropsContext from './PropsContext'\nimport {\n  RtmProvider,\n  muteRequest,\n  mutingDevice,\n  rtmStatusEnum,\n  userData,\n  popUpStateEnum,\n  messageObject\n} from './RtmContext'\nimport RtcContext from './RtcContext'\nimport AgoraRTC, { UID } from 'agora-rtc-react'\nimport { LocalContext } from './LocalUserContext'\nimport muteAudio from './Controls/Local/muteAudio'\nimport muteVideo from './Controls/Local/muteVideo'\n\nconst timeNow = () => new Date().getTime()\nconst useChannel = createLazyChannel()\nconst useClient = createLazyClient()\n/**\n * React component that contains the RTM logic. It manages the usernames, remote mute requests and provides data to the children components by wrapping them with context providers.\n */\nconst RtmConfigure = (props: any) => {\n  const { rtcProps, rtmProps } = useContext(PropsContext)\n  const [isLoggedIn, setLoggedIn] = useState<boolean>(false)\n  const rtmClient = useClient(rtcProps.appId)\n  const channel = useChannel(rtmClient, rtcProps.channel)\n  const localUid = useRef<string>('')\n  const timerValueRef: any = useRef(5)\n  const local = useContext(LocalContext)\n  const { rtmCallbacks } = useContext(PropsContext)\n  const [uidMap, setUidMap] = useState<Object>({})\n  const [usernames, setUsernames] = useState<Object>({})\n  const [userDataMap, setUserDataMap] = useState<Object>({})\n  const [popUpState, setPopUpState] = useState<popUpStateEnum>(\n    popUpStateEnum.closed\n  )\n  const [rtmStatus, setRtmStatus] = useState<rtmStatusEnum>(\n    rtmStatusEnum.offline\n  )\n  const {\n    localUid: rtcUid,\n    localAudioTrack,\n    localVideoTrack,\n    dispatch,\n    channelJoined\n  } = useContext(RtcContext)\n\n  const login = async () => {\n    const { tokenUrl } = rtcProps\n    if (tokenUrl) {\n      try {\n        const res = await fetch(\n          tokenUrl + '/rtm/' + (rtmProps?.uid || localUid.current)\n        )\n        const data = await res.json()\n        const serverToken = data.rtmToken\n        await rtmClient.login({\n          uid: rtmProps?.uid || localUid.current,\n          token: serverToken\n        })\n        timerValueRef.current = 5\n      } catch (error) {\n        setTimeout(async () => {\n          timerValueRef.current = timerValueRef.current + timerValueRef.current\n          login()\n        }, timerValueRef.current * 1000)\n      }\n    } else {\n      try {\n        await rtmClient.login({\n          uid: rtmProps?.uid || localUid.current,\n          token: rtmProps?.token || undefined\n        })\n        timerValueRef.current = 5\n      } catch (error) {\n        setTimeout(async () => {\n          timerValueRef.current = timerValueRef.current + timerValueRef.current\n          login()\n        }, timerValueRef.current * 1000)\n      }\n    }\n  }\n\n  const joinChannel = async () => {\n    await rtcUid\n    try {\n      await channel.join()\n      timerValueRef.current = 5\n    } catch (error) {\n      setTimeout(async () => {\n        timerValueRef.current = timerValueRef.current + timerValueRef.current\n        joinChannel()\n      }, timerValueRef.current * 1000)\n    }\n  }\n\n  const init = async () => {\n    setRtmStatus(rtmStatusEnum.initialising)\n    // rtmProps?.uid\n    //   ? (localUid.current = String(rtmProps.uid))\n    //   :\n    rtcProps.uid\n      ? (localUid.current = String(rtcProps.uid))\n      : (localUid.current = String(timeNow()))\n\n    rtmClient.on('ConnectionStateChanged', (state, reason) => {\n      console.log(state, reason)\n    })\n\n    rtmClient.on('TokenExpired', async () => {\n      const { tokenUrl } = rtcProps\n      console.log('token expired - renewing')\n      if (tokenUrl) {\n        try {\n          const res = await fetch(\n            tokenUrl + '/rtm/' + (rtmProps?.uid || localUid.current)\n          )\n          const data = await res.json()\n          const serverToken = data.rtmToken\n          await rtmClient.renewToken(serverToken)\n          timerValueRef.current = 5\n        } catch (error) {\n          console.error('TokenExpiredError', error)\n        }\n      }\n    })\n\n    rtmClient.on('MessageFromPeer', (message, peerId) => {\n      handleReceivedMessage(message as RtmRawMessage, peerId)\n    })\n\n    channel.on('ChannelMessage', (message, peerId) => {\n      handleReceivedMessage(message as RtmRawMessage, peerId)\n    })\n\n    channel.on('MemberJoined', async (peerId) => {\n      await sendPeerMessage(createUserData(), peerId)\n    })\n    channel.on('MemberCountUpdated', async (count) => {\n      console.log('RTM-MemberCountUpdated: ', count)\n    })\n\n    // handle RTM callbacks\n    if (rtmCallbacks?.channel) {\n      Object.keys(rtmCallbacks.channel).map((callback) => {\n        if (rtmCallbacks.channel) {\n          channel.on(\n            callback as keyof RtmEvents.RtmChannelEvents,\n            rtmCallbacks.channel[callback]\n          )\n        }\n      })\n    } else if (rtmCallbacks?.client) {\n      Object.keys(rtmCallbacks.client).map((callback) => {\n        if (rtmCallbacks.client) {\n          rtmClient.on(\n            callback as keyof RtmEvents.RtmClientEvents,\n            rtmCallbacks.client[callback]\n          )\n        }\n      })\n    }\n\n    if (rtcProps.tokenUrl) {\n      const { tokenUrl, uid } = rtcProps\n      rtmClient.on('TokenExpired', async () => {\n        console.log('token expired')\n        const res = await fetch(tokenUrl + '/rtm/' + (uid || 0) + '/')\n        const data = await res.json()\n        const token = data.rtmToken\n        rtmClient.renewToken(token)\n      })\n    }\n\n    setRtmStatus(rtmStatusEnum.loggingIn)\n    await login()\n    setRtmStatus(rtmStatusEnum.loggedIn)\n    await joinChannel()\n    setRtmStatus(rtmStatusEnum.connected)\n    // console.log('!rtcUid', rtcUid, channelJoined)\n    setUsernames((p) => {\n      return { ...p, 0: rtmProps?.username }\n    })\n    sendChannelMessage(createUserData())\n  }\n\n  const createUserData = () => {\n    return {\n      messageType: 'UserData',\n      rtmId: rtmProps?.uid || localUid.current,\n      rtcId: rtcUid.current,\n      username: rtmProps?.username,\n      role: rtcProps.role === 'audience' ? 1 : 0,\n      uikit: {\n        platform: 'web',\n        framework: 'react',\n        version: '0.1.0'\n      },\n      agora: {\n        rtm: AgoraRTM.VERSION,\n        rtc: AgoraRTC.VERSION\n      }\n    } as userData\n  }\n\n  const sendMuteRequest = (device: mutingDevice, rtcId: UID, mute: boolean) => {\n    const forced = rtmProps?.showPopUpBeforeRemoteMute === false\n    const payload: muteRequest = {\n      messageType: 'MuteRequest',\n      device,\n      rtcId,\n      mute,\n      isForceful: forced\n    }\n    const peerId = uidMap[rtcId]\n    if (forced && !mute) {\n      console.log('cannot send force unmute request')\n    } else if (peerId) {\n      sendPeerMessage(payload, peerId)\n    } else {\n      console.log('peer not found')\n    }\n  }\n\n  const handleReceivedMessage = (message: RtmRawMessage, peerId: string) => {\n    const payload = (message as RtmRawMessage).rawMessage\n    const messageObject: messageObject = parsePayload(payload)\n    console.log(messageObject, peerId)\n    switch (messageObject.messageType) {\n      case 'UserData':\n        handleReceivedUserDataMessage(messageObject)\n        break\n      case 'MuteRequest':\n        handleReceivedMuteMessage(messageObject)\n        break\n      case 'RtmDataRequest':\n        switch (messageObject.type) {\n          case 'ping':\n            handlePing(peerId)\n            break\n          case 'userData':\n            handleUserDataRequest(peerId)\n            break\n          default:\n            console.log(peerId)\n        }\n        break\n      default:\n        console.log('unknown message type')\n    }\n  }\n\n  const handleReceivedUserDataMessage = (userData: userData) => {\n    setUidMap((p) => {\n      return { ...p, [userData.rtcId]: userData.rtmId }\n    })\n    setUsernames((p) => {\n      return { ...p, [userData.rtcId]: userData.username }\n    })\n    setUserDataMap((p) => {\n      return { ...p, [userData.rtmId]: userData }\n    })\n    // console.log('userData', userData, userDataMap, uidMap)\n  }\n\n  const handleReceivedMuteMessage = (muteRequest: muteRequest) => {\n    // console.log('!muteRequest', muteRequest)\n    if (rtcUid.current === muteRequest.rtcId) {\n      if (muteRequest.isForceful) {\n        if (muteRequest.mute) {\n          if (muteRequest.device === mutingDevice.microphone) {\n            localAudioTrack && muteAudio(local, dispatch, localAudioTrack)\n          } else if (muteRequest.device === mutingDevice.camera) {\n            localVideoTrack && muteVideo(local, dispatch, localVideoTrack)\n          }\n        } else console.error('cannot force unmute')\n      } else {\n        if (muteRequest.device === mutingDevice.microphone) {\n          if (muteRequest.mute) setPopUpState(popUpStateEnum.muteMic)\n          else setPopUpState(popUpStateEnum.unmuteMic)\n        } else if (muteRequest.device === mutingDevice.camera) {\n          if (muteRequest.mute) setPopUpState(popUpStateEnum.muteCamera)\n          else setPopUpState(popUpStateEnum.unmuteCamera)\n        }\n      }\n    }\n  }\n\n  const handlePing = (peerId: string) => {\n    sendPeerMessage({ messageType: 'RtmDataRequest', type: 'pong' }, peerId)\n  }\n\n  const handleUserDataRequest = (peerId: string) => {\n    sendPeerMessage(createUserData(), peerId)\n  }\n\n  const sendChannelMessage = async (payload: messageObject) => {\n    const rawMessage = createRawMessage(payload)\n    const message = rtmClient.createMessage({\n      rawMessage: rawMessage,\n      messageType: AgoraRTM.MessageType.RAW,\n      description: 'AgoraUIKit'\n    })\n    await channel.sendMessage(message)\n  }\n\n  const sendPeerMessage = async (payload: messageObject, peerId: string) => {\n    const rawMessage = createRawMessage(payload)\n    const message = rtmClient.createMessage({\n      rawMessage: rawMessage,\n      messageType: AgoraRTM.MessageType.RAW,\n      description: 'AgoraUIKit'\n    })\n    await rtmClient.sendMessageToPeer(message, peerId)\n  }\n\n  const end = async () => {\n    await rtmClient.logout()\n    // await channel.leave()\n    await rtmClient.removeAllListeners()\n    // await channel.removeAllListeners()\n  }\n\n  useEffect(() => {\n    // if RTC has joined channel then init\n    if (channelJoined) {\n      init()\n      setLoggedIn(true)\n    }\n    return () => {\n      if (channelJoined) {\n        end()\n      }\n    }\n  }, [rtcProps.channel, rtcProps.appId, channelJoined])\n\n  return (\n    <RtmProvider\n      value={{\n        rtmStatus,\n        sendPeerMessage,\n        sendChannelMessage,\n        sendMuteRequest,\n        rtmClient,\n        uidMap,\n        usernames,\n        userDataMap,\n        popUpState,\n        setPopUpState\n      }}\n    >\n      {isLoggedIn ? props.children : <React.Fragment />}\n    </RtmProvider>\n  )\n}\n\nconst enc = new TextEncoder()\nconst dec = new TextDecoder()\n\n/**\n * Create an RTM raw message from any serilizable JS Object, decode using the {@link parsePayload} function\n * @param msg message object\n * @returns Uint8Array\n */\nexport const createRawMessage = (msg: any) => {\n  return enc.encode(JSON.stringify(msg))\n}\n/**\n * Decode the received RTM message or message created using {@link createRawMessage}\n * @param data encoded raw RTM message\n * @returns JS Object\n */\nexport const parsePayload = (data: BufferSource) => {\n  return JSON.parse(dec.decode(data))\n}\n\nexport default RtmConfigure\n","import React, { CSSProperties, useContext } from 'react'\nimport PropsContext from '../../PropsContext'\nimport RtmContext, { popUpStateEnum } from '../../RtmContext'\nimport RtcContext from '../../RtcContext'\nimport muteVideo from '../Local/muteVideo'\nimport { LocalContext } from '../../LocalUserContext'\nimport muteAudio from '../Local/muteAudio'\n\nfunction PopUp() {\n  const { styleProps } = useContext(PropsContext)\n  const { popUpState, setPopUpState } = useContext(RtmContext)\n  const { popUpContainer } = styleProps || {}\n  const { dispatch, localVideoTrack, localAudioTrack } = useContext(RtcContext)\n  const local = useContext(LocalContext)\n\n  return popUpState !== popUpStateEnum.closed ? (\n    <div\n      style={{\n        ...styles.container,\n        ...popUpContainer\n      }}\n    >\n      <div style={{ color: '#fff', fontSize: 18, fontWeight: 700 }}>\n        {popUpState === popUpStateEnum.muteCamera ||\n        popUpState === popUpStateEnum.muteMic\n          ? 'Mute '\n          : 'Unmute '}\n        {popUpState === popUpStateEnum.muteCamera ||\n        popUpState === popUpStateEnum.unmuteCamera\n          ? 'Camera'\n          : 'Mic'}\n        ?\n      </div>\n      <div\n        style={{\n          flexDirection: 'row',\n          display: 'flex',\n          width: '100%',\n          justifyContent: 'space-around'\n        }}\n      >\n        <div\n          onClick={() => {\n            switch (popUpState) {\n              case popUpStateEnum.muteCamera:\n                local.hasVideo &&\n                  localVideoTrack &&\n                  muteVideo(local, dispatch, localVideoTrack)\n                break\n              case popUpStateEnum.muteMic:\n                local.hasAudio &&\n                  localAudioTrack &&\n                  muteAudio(local, dispatch, localAudioTrack)\n                break\n              case popUpStateEnum.unmuteCamera:\n                !local.hasVideo &&\n                  localVideoTrack &&\n                  muteVideo(local, dispatch, localVideoTrack)\n                break\n              case popUpStateEnum.unmuteMic:\n                !local.hasAudio &&\n                  localAudioTrack &&\n                  muteAudio(local, dispatch, localAudioTrack)\n                break\n            }\n            setPopUpState(popUpStateEnum.closed)\n          }}\n          style={styles.button}\n        >\n          Confirm\n        </div>\n        <div\n          style={styles.buttonClose}\n          onClick={() => setPopUpState(popUpStateEnum.closed)}\n        >\n          Close\n        </div>\n      </div>\n    </div>\n  ) : null\n}\n\nconst styles = {\n  button: {\n    color: '#fff',\n    cursor: 'pointer',\n    borderWidth: 2,\n    borderStyle: 'solid',\n    borderColor: '#fff',\n    padding: '2px 4px',\n    borderRadius: 4\n  } as CSSProperties,\n  buttonClose: {\n    color: '#fff',\n    cursor: 'pointer',\n    borderWidth: 2,\n    borderStyle: 'solid',\n    borderColor: '#fff',\n    padding: '2px 4px',\n    borderRadius: 4\n  },\n  container: {\n    backgroundColor: '#007bffaa',\n    position: 'absolute',\n    width: 240,\n    height: 80,\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    zIndex: 100,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-evenly',\n    alignItems: 'center'\n  } as CSSProperties\n}\n\nexport default PopUp\n","/**\n * @module AgoraUIKit\n */\nimport React, { useContext } from 'react'\nimport RtcConfigure from './RTCConfigure'\nimport PropsContext, {\n  PropsProvider,\n  PropsInterface,\n  layout\n} from './PropsContext'\nimport LocalControls from './Controls/LocalControls'\nimport PinnedVideo from './PinnedVideo'\nimport GridVideo from './GridVideo'\nimport TracksConfigure from './TracksConfigure'\nimport RtmConfigure from './RTMConfigure'\nimport LocalUserContext from './LocalUserContext'\nimport PopUp from './Controls/Remote/RemoteMutePopUp'\n\n/**\n * High level component to render the UI Kit\n * @param props {@link PropsInterface}\n */\nconst AgoraUIKit: React.FC<PropsInterface> = (props) => {\n  const { styleProps, rtcProps } = props\n  const { UIKitContainer } = styleProps || {}\n\n  return (\n    <PropsProvider value={props}>\n      <div\n        style={{\n          ...style,\n          ...UIKitContainer\n        }}\n      >\n        {rtcProps.role === 'audience' ? (\n          <VideocallUI />\n        ) : (\n          <TracksConfigure>\n            <VideocallUI />\n          </TracksConfigure>\n        )}\n      </div>\n    </PropsProvider>\n  )\n}\n\nexport const VideocallUI = () => {\n  const { rtcProps } = useContext(PropsContext)\n  return (\n    <RtcConfigure callActive={rtcProps.callActive}>\n      <LocalUserContext>\n        {rtcProps.disableRtm ? (\n          <React.Fragment>\n            {rtcProps?.layout === layout.grid ? <GridVideo /> : <PinnedVideo />}\n            <LocalControls />\n          </React.Fragment>\n        ) : (\n          <RtmConfigure>\n            <PopUp />\n            {rtcProps?.layout === layout.grid ? <GridVideo /> : <PinnedVideo />}\n            <LocalControls />\n          </RtmConfigure>\n        )}\n      </LocalUserContext>\n    </RtcConfigure>\n  )\n}\n\nconst style = {\n  display: 'flex',\n  flex: 1,\n  minHeight: 0,\n  flexDirection: 'column'\n} as React.CSSProperties\n\nexport default AgoraUIKit\n","import React, { useContext } from 'react'\nimport PropsContext from '../../PropsContext'\n// import RtcContext from '../../RtcContext'\nimport BtnTemplate from '../BtnTemplate'\n\nfunction EndCall() {\n  const { styleProps, callbacks } = useContext(PropsContext)\n  const { localBtnStyles } = styleProps || {}\n  const { endCall } = localBtnStyles || {}\n  // const { dispatch } = useContext(RtcContext)\n\n  return (\n    <BtnTemplate\n      style={endCall || { backgroundColor: '#ef5588', borderColor: '#f00' }}\n      name='callEnd'\n      onClick={() => callbacks?.EndCall && callbacks.EndCall()}\n    />\n  )\n}\n\nexport default EndCall\n"],"names":["RtcContext","React","createContext","RtcProvider","Provider","RtcConsumer","Consumer","remoteTrackState","layout","ToggleState","initialValue","rtcProps","appId","channel","role","rtmProps","PropsContext","PropsProvider","MaxUidContext","MaxUidProvider","MaxUidConsumer","MinUidContext","MinUidProvider","MinUidConsumer","TracksContext","TracksProvider","initState","max","uid","hasAudio","no","hasVideo","min","reducer","state","action","stateUpdate","uids","map","u","type","user","subbed","indexOf","value","minUpdate","length","UIKitUser","find","filter","pop","useClient","createClient","codec","mode","RtcConfigure","props","useRef","useContext","localVideoTrack","localAudioTrack","callbacks","useState","ready","setReady","channelJoined","setChannelJoined","joinRes","canJoin","Promise","resolve","reject","console","log","client","customRtcClient","removeAllListeners","localVideoTrackHasPublished","localAudioTrackHasPublished","mediaStore","callActive","undefined","useReducer","uidState","dispatch","useEffect","init","on","args","remoteUser","current","mediaType","subscribe","then","_e","audioTrack","play","enableDualStream","dualStreamMode","setStreamFallbackOption","e","stop","curState","prevState","reason","tokenUrl","fetch","res","json","data","token","rtcToken","renewToken","events","Object","keys","apply","join","userUid","setClientRole","error","leave","err","publish","enabled","videoTrack","enableActiveSpeaker","activeSpeaker","grid","volumes","highestvolumeObj","reduce","highestVolume","volume","level","mapActiveSpeakerToZero","enableAudioVolumeIndicator","localUid","children","icons","videocam","FontAwesomeIcon","icon","color","videocamOff","remoteSwap","Fragment","points","x1","y1","x2","y2","callEnd","d","mic","micOff","iconsColors","BtnTemplate","onClick","name","disabled","style","styleProps","theme","BtnTemplateStyles","iconSize","customIcon","width","height","borderRadius","borderColor","backgroundColor","alignItems","justifyContent","display","cursor","margin","src","alt","xmlns","viewBox","fill","opacity","stroke","strokeWidth","strokeLinecap","strokeLinejoin","Icons","LocalContext","LocalUserContext","localUser","localState","disabling","enabling","setEnabled","LocalAudioMute","localBtnStyles","muteLocalAudio","local","muteAudio","LocalVideoMute","muteLocalVideo","muteVideo","LocalControls","localBtnContainer","zIndex","flexDirection","rtmStatusEnum","clientRoleRaw","mutingDevice","popUpStateEnum","RtmContext","RtmProvider","RtmConsumer","RemoteVideoMute","sendMuteRequest","uidMap","remoteBtnStyles","muteRemoteVideo","isMuted","camera","RemoteAudioMute","muteRemoteAudio","microphone","SwapUser","VideoPlaceholder","maxViewStyles","maxViewOverlayContainer","CustomVideoPlaceholder","key","imgContainer","img","isShown","btnContainer","showButtons","disableRtm","showSwap","flex","position","alignSelf","justifySelf","Username","usernames","displayUsername","styles","username","usernameText","background","padding","bottom","right","MaxVideoView","videoMode","renderModeProp","setIsShown","container","onMouseEnter","onMouseLeave","videoContainer","AgoraVideoPlayer","videoplayer","config","fit","overlay","MinVideoView","minViewStyles","minViewOverlayContainer","PinnedVideo","minViewContainer","pinnedVideoContainer","maxViewContainer","scrollViewContainer","parentRef","setWidth","setHeight","isLandscape","handleResize","offsetWidth","offsetHeight","window","addEventListener","removeEventListener","ref","overflow","maxUsers","className","scrollbar","overflowY","overflowX","marginTop","marginLeft","minUsers","minHeight","minWidth","GridVideo","gridVideoCells","gridVideoContainer","users","innerWidth","innerHeight","unit","gridTemplateColumns","repeat","useTracks","createMicrophoneAndCameraTracks","encoderConfig","TracksConfigure","setLocalVideoTrack","setLocalAudioTrack","trackReady","tracks","close","timeNow","Date","getTime","useChannel","createLazyChannel","createLazyClient","RtmConfigure","isLoggedIn","setLoggedIn","rtmClient","timerValueRef","rtmCallbacks","setUidMap","setUsernames","userDataMap","setUserDataMap","closed","popUpState","setPopUpState","offline","rtmStatus","setRtmStatus","rtcUid","login","serverToken","rtmToken","setTimeout","joinChannel","initialising","String","message","peerId","handleReceivedMessage","sendPeerMessage","createUserData","count","callback","loggingIn","loggedIn","connected","p","sendChannelMessage","messageType","rtmId","rtcId","uikit","platform","framework","version","agora","rtm","AgoraRTM","VERSION","rtc","AgoraRTC","device","mute","forced","showPopUpBeforeRemoteMute","payload","isForceful","rawMessage","messageObject","parsePayload","handleReceivedUserDataMessage","handleReceivedMuteMessage","handlePing","handleUserDataRequest","userData","muteRequest","muteMic","unmuteMic","muteCamera","unmuteCamera","createRawMessage","createMessage","MessageType","RAW","description","sendMessage","sendMessageToPeer","end","logout","enc","TextEncoder","dec","TextDecoder","msg","encode","JSON","stringify","parse","decode","PopUp","popUpContainer","fontSize","fontWeight","button","buttonClose","borderWidth","borderStyle","top","left","transform","AgoraUIKit","UIKitContainer","VideocallUI","EndCall","endCall"],"mappings":"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"}